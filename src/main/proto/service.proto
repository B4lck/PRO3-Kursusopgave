syntax = "proto3";

option java_multiple_files = true;

package mmn.pro3kursusopgave;

message DTOAnimal {
  int32 animalNo = 1;
  double weight = 2;
  string typeOfAnimal = 3;
  string origin = 4;
  int64 dateTime = 5;
}

message DTOAnimalPart {
  int32 trayNo = 1;
  DTOAnimal from = 2;
  double weight = 3;
}

message DTOTray
{
  int32 trayNo = 1;
  double maxWeight = 2;
  string typeOfAnimal = 3;
  repeated DTOAnimalPart parts = 4;
}

message DTOPackage
{
  int32 packageNo = 1;
  int64 expire_date = 2;
  repeated DTOTray trays = 3;
}

message GetAllAnimalsInvolvedInProductRequest
{
  int32 productId = 1;
}

message GetAllAnimalsInvolvedInProductResponse
{
  repeated DTOAnimal animals = 1;
}

message GetAllProductsInvolvedInAnimalRequest
{
  int32 animalId = 1;
}

message GetAllProductsInvolvedInAnimalResponse
{
  repeated DTOPackage products = 1;
}

message GetAllAnimalsFromDateRequest
{
  int64 dateTime = 1;
}

message GetAllAnimalsFromDateResponse
{
  repeated DTOAnimal animals = 1;
}

message GetAllAnimalsFromOriginRequest
{
  string origin = 1;
}

message GetAllAnimalsFromOriginResponse
{
  repeated DTOAnimal animals = 1;
}

service SlaughterHouseService
{
  rpc GetAllAnimalsInvolvedInProduct (GetAllAnimalsInvolvedInProductRequest) returns (GetAllAnimalsInvolvedInProductResponse);
  rpc GetAllProductsInvolvedInAnimal (GetAllProductsInvolvedInAnimalRequest) returns (GetAllProductsInvolvedInAnimalResponse);
  rpc GetAllAnimalsFromDate(GetAllAnimalsFromDateRequest) returns (GetAllAnimalsFromDateResponse);
  rpc GetAllAnimalsFromOrigin(GetAllAnimalsFromOriginRequest) returns (GetAllAnimalsFromOriginResponse);
}